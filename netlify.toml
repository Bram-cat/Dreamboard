# Netlify Configuration for Next.js

[build]
  command = "npm run build"
  publish = ".next"

# Serverless function settings
[functions]
  # Increase timeout to maximum (26 seconds for Pro, 10 seconds for free tier)
  # Note: Free tier is limited to 10 seconds - consider upgrading if needed
  node_bundler = "esbuild"

# Next.js specific settings
[[plugins]]
  package = "@netlify/plugin-nextjs"

# Environment variables (configure these in Netlify Dashboard > Site settings > Environment variables)
# Required variables:
# - GEMINI_API_KEY
# - OPENAI_API_KEY
# - DEEPSEEK_API_KEY (if used)
# - RUNWAYML_API_SECRET (if used)

# Redirect rules for API routes
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

# Headers for better performance
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
